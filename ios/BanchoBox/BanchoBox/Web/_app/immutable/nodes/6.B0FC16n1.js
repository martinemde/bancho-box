import{D as _}from"../chunks/CFYNNzyW.js";import"../chunks/DsnmJJEf.js";import"../chunks/BZzp2Sqo.js";import{p as $e,l as M,s as g,m as P,d as h,g as e,e as ke,h as k,i as a,j as u,u as c,r,t as U,b as $,a as Ie,a3 as Se,V as Le,T as Ve,$ as Ae,c as Fe,f as Oe}from"../chunks/CGMZXle5.js";import{a as m,e as Qe}from"../chunks/Dal0ayJW.js";import{i as E}from"../chunks/Csmq2bM6.js";import{s as me,a as Ue,t as ge,e as _e,i as be,r as Ee}from"../chunks/CIiS3sh5.js";import{i as Ge,T as He,b as Je,L as ye}from"../chunks/CT3irOJL.js";import{i as Be}from"../chunks/DKmXlTrh.js";import{p as De,a as Ke,b as We}from"../chunks/BCPGliUN.js";import{A as Ce,S as Xe}from"../chunks/DPB2ZqNU.js";import"../chunks/ByzeBPfV.js";import{P as Ye}from"../chunks/MpCN7v-n.js";import{b as Pe}from"../chunks/DfpRMjpr.js";const Ze=!0;async function et(){return{dishes:_.dishes,parties:_.parties,partyDishes:_.partyDishes}}const kt=Object.freeze(Object.defineProperty({__proto__:null,load:et,prerender:Ze},Symbol.toStringTag,{value:"Module"}));var tt=k('<div class="relative"><span class="absolute -top-2 -right-3 z-10 badge rounded-full preset-filled-primary-500 px-1.5 py-0.5"> </span> <img class="h-full w-full overflow-hidden rounded-md bg-surface-300-700 object-contain" alt="" loading="lazy"/></div>'),rt=k('<div class="flex w-full items-center justify-between"><span class="truncate text-xs opacity-80"> </span></div>'),st=k('<tr class="border-b border-surface-200-800"><td class="p-2"> </td><td class="p-2 text-center tabular-nums"> </td><td class="p-2 text-center tabular-nums"> </td><td class="p-2 text-right tabular-nums"> </td><td class="p-2 text-right tabular-nums"> </td><td class="p-2"> </td></tr>'),at=k('<div class="mt-2 overflow-x-auto"><table class="w-full table-auto text-sm"><thead class="bg-surface-200-800"><tr><th class="p-2 text-left">Ingredient</th><th class="p-2 text-center">Qty</th><th class="p-2 text-center">Upgrade</th><th class="p-2 text-right">Buy</th><th class="p-2 text-right">Sell</th><th class="p-2 text-left">Source</th></tr></thead><tbody></tbody><tfoot><tr class="bg-surface-200-800 font-semibold"><td class="p-2 text-xs uppercase">Recipe Cost</td><td class="p-2 text-center tabular-nums"> </td><td class="p-2 text-center tabular-nums"> </td><td></td><td class="p-2 text-right tabular-nums"> </td><td></td></tr></tfoot></table></div>'),it=k('<article class="divide-y divide-surface-200-800 card border border-surface-200-800 preset-filled-surface-100-900"><section class="p-4"><div class="flex items-start gap-4"><div class="inline-block"><!> <div class="mt-2"><!></div></div> <div class="min-w-0 flex-1 space-y-4"><header><div class="truncate text-base font-semibold"> </div> <div class="mt-0.5 truncate text-xs opacity-70"> </div></header> <!></div></div></section> <section><!></section></article>');function nt(oe,G){$e(G,!1);const[C,N]=Ke(),I=()=>We(ge,"$trackedDishIds",C),H=P(),x=P(),w=P(),te=P();let o=De(G,"dish",8),S=De(G,"partyDish",8);function y(t){return t==null||Number.isNaN(t)?"—":new Intl.NumberFormat().format(Math.round(t))}let q=P([]);M(()=>h(o()),()=>{g(H,Ge(o().name))}),M(()=>h(S()),()=>{g(x,_.getPartyById(S().partyId))}),M(()=>h(o()),()=>{g(w,o().servings>0?o().recipeCost/o().servings:null)}),M(()=>(h(o()),_),()=>{g(q,o().ingredients.map(t=>{const n=_.getIngredientById(t.ingredientId);return{name:n?.name??"Unknown",count:t.count,upgradeCount:t.upgradeCount??null,sell:n?.cost??null,buy:t.unitCost??null,source:n?.source??n?.type??"—"}}))}),M(()=>e(q),()=>{g(te,e(q).map(t=>`${t.name} ×${t.count}`).join(", "))}),ke(),Be();var R=it(),D=a(R),re=a(D),L=a(re);me(L,"width: 96px");var V=a(L);{var J=t=>{var n=tt();me(n,"width: 96px; height: 96px");var v=a(n),d=a(v);r(v);var l=u(v,2);r(n),U(()=>{m(d,`${e(x),c(()=>e(x)?.bonus??"")??""}×`),Ue(l,"src",e(H))}),$(t,n)};E(V,t=>{e(H)&&t(J)})}var j=u(V,2);me(j,"width: 96px");var K=a(j);{var de=t=>{const n=Se(()=>(I(),h(o()),c(()=>I().has(o().id))));He(t,{get checked(){return e(n)},$$events:{change:v=>{v.detail.checked?ge.track(o().id):ge.untrack(o().id)}}})};E(K,t=>{h(Pe),h(o()),c(()=>Pe&&o()?.id!=null)&&t(de)})}r(j),r(L);var se=u(L,2),W=a(se),A=a(W),ae=a(A,!0);r(A);var X=u(A,2),le=a(X,!0);r(X),r(W);var ce=u(W,2);Ye(ce,{get price(){return h(S()),c(()=>S().partyPrice)},get servings(){return h(o()),c(()=>o().servings)},get totalCost(){return h(o()),c(()=>o().recipeCost)}}),r(se),r(re),r(D);var i=u(D,2),s=a(i);Ce(s,{collapsible:!0,defaultValue:[],children:(t,n)=>{{const v=l=>{var f=rt(),b=a(f),B=a(b,!0);r(b),r(f),U(()=>m(B,e(te))),$(l,f)},d=l=>{var f=at(),b=a(f),B=u(a(b));_e(B,5,()=>e(q),be,(Q,p)=>{var ee=st(),T=a(ee),Me=a(T,!0);r(T);var ve=u(T),Ne=a(ve);r(ve);var pe=u(ve),we=a(pe,!0);r(pe);var fe=u(pe),Re=a(fe,!0);r(fe);var he=u(fe),je=a(he,!0);r(he);var xe=u(he),ze=a(xe,!0);r(xe),r(ee),U((Te,qe)=>{m(Me,(e(p),c(()=>e(p).name))),m(Ne,`×${e(p),c(()=>e(p).count)??""}`),m(we,(e(p),c(()=>e(p).upgradeCount??"—"))),m(Re,Te),m(je,qe),m(ze,(e(p),c(()=>e(p).source)))},[()=>(e(p),c(()=>e(p).buy==null?"—":y(e(p).buy))),()=>(e(p),c(()=>e(p).sell==null?"—":y(e(p).sell)))]),$(Q,ee)}),r(B);var ie=u(B),Y=a(ie),F=u(a(Y)),ue=a(F,!0);r(F);var Z=u(F),z=a(Z,!0);r(Z);var O=u(Z,2),ne=a(O,!0);r(O),Le(),r(Y),r(ie),r(b),r(f),U((Q,p)=>{m(ue,(h(o()),c(()=>o().ingredientCount))),m(z,Q),m(ne,p)},[()=>(h(o()),c(()=>o().upgradeCost?y(o().upgradeCost):"—")),()=>(h(o()),c(()=>y(o().recipeCost)))]),$(l,f)};Ce.Item(t,{value:"recipe",control:v,panel:d,$$slots:{control:!0,panel:!0}})}},$$slots:{default:!0}}),r(i),r(R),U(()=>{m(ae,(h(o()),c(()=>o().name))),m(le,(h(o()),c(()=>o().unlock_condition||"—")))}),$(oe,R),Ie(),N()}var ot=k('<meta name="description" content="Complete party collection from Dave the Diver with calculated profit analysis"/>'),dt=k('<button class="clear-btn svelte-1dqf954" aria-label="Clear search">×</button>'),lt=k('<section class="mt-6"><header class="flex items-center justify-between border-b border-surface-200-800 px-4 py-3"><h3 class="m-0 h4"> </h3> <div class="flex items-center gap-2"><span class="badge preset-filled-primary-500 text-xs"> </span> <span class="text-sm opacity-80"> </span></div></header> <div class="flex flex-col gap-4 p-4"><!> <!></div></section>'),ct=k('<div class="p-4"><!></div>'),ut=k('<div class="mx-auto max-w-screen-2xl md:p-4"><div class="controls p-4 svelte-1dqf954"><div class="search-wrapper svelte-1dqf954"><input type="search" class="search-input svelte-1dqf954" placeholder="Search dishes by name, ingredient, DLC, unlock…"/> <!></div> <!></div> <section class="parties"><div class="parties-container"><!> <!></div></section></div>');function It(oe,G){$e(G,!1);const C=P();let N=P("dishName"),I=P("asc");const H=_.parties;let x=P("");function w(i){return(i??"").toString().toLowerCase()}function te(i,s){if(!s)return!0;const t=_.getDishById(i.dishId);if(!t)return!1;const n=w(s);if(w(t.name).includes(n)||w(t.dlc).includes(n)||w(t.unlock_condition).includes(n))return!0;for(const v of t.ingredients||[]){const d=_.getIngredientById(v.ingredientId);if(w(d?.name).includes(n))return!0}return!1}function o(i,s,t){return[...i].sort((n,v)=>{let d,l;const f=_.getDishById(n.dishId),b=_.getDishById(v.dishId);if(!f||!b)return 0;switch(s){case"dishName":d=f.name,l=b.name;break;case"unlockCondition":d=f.unlock_condition||"",l=b.unlock_condition||"";break;case"partyPrice":d=n.partyPrice,l=v.partyPrice;break;case"partyRevenue":d=n.partyRevenue,l=v.partyRevenue;break;case"recipeCost":d=f.recipeCost,l=b.recipeCost;break;case"profit":d=n.profit,l=v.profit;break;case"profitPerServing":d=n.profitPerServing,l=v.profitPerServing;break;default:d=n[s]||f[s],l=v[s]||b[s]}return d==null&&l==null?0:d==null?t==="asc"?-1:1:l==null?t==="asc"?1:-1:typeof d=="string"&&typeof l=="string"?t==="asc"?d.localeCompare(l):l.localeCompare(d):t==="asc"?d<l?-1:d>l?1:0:l<d?-1:l>d?1:0})}let S=10,y=P(S);function q(){g(y,Math.min(e(y)+S,e(C).length))}let R=20,D=P({});function re(i){const s=e(C).find(n=>n.id===i);if(!s)return;const t=e(D)[i]??R;g(D,{...e(D),[i]:Math.min(t+R,s.sortedDishes.length)})}const L=[{value:"dishName",label:"Dish Name"},{value:"partyPrice",label:"Price"},{value:"partyRevenue",label:"Revenue"},{value:"recipeCost",label:"Recipe Cost"},{value:"profit",label:"Profit"},{value:"profitPerServing",label:"Profit / Serving"}];M(()=>(e(N),e(I),e(x)),()=>{g(C,H.map(i=>{const s=_.getPartyDishesByPartyId(i.id),t=o(s,e(N),e(I)),n=e(x)&&e(x).trim().length>0?t.filter(v=>te(v,e(x))):t;return{...i,sortedDishes:n}}))}),M(()=>{},()=>{g(y,S)}),M(()=>e(C),()=>{const i={};for(const s of e(C))i[s.id]=Math.min(R,s.sortedDishes.length);g(D,i)}),ke(),Be();var V=ut();Ve(i=>{var s=ot();Ae.title="Parties - Bancho Box",$(i,s)});var J=a(V),j=a(J),K=a(j);Ee(K);var de=u(K,2);{var se=i=>{var s=dt();Qe("click",s,()=>{g(x,"")}),$(i,s)};E(de,i=>{e(x)&&i(se)})}r(j);var W=u(j,2);Xe(W,{get options(){return L},get column(){return e(N)},set column(i){g(N,i)},get direction(){return e(I)},set direction(i){g(I,i)},$$events:{change:i=>{g(N,i.detail.column),g(I,i.detail.direction)}},$$legacy:!0}),r(J);var A=u(J,2),ae=a(A),X=a(ae);_e(X,1,()=>(e(C),e(y),c(()=>e(C).slice(0,e(y)))),be,(i,s)=>{var t=lt(),n=a(t),v=a(n),d=a(v);r(v);var l=u(v,2),f=a(l),b=a(f);r(f);var B=u(f,2),ie=a(B);r(B),r(l),r(n);var Y=u(n,2),F=a(Y);_e(F,1,()=>(e(s),e(D),c(()=>e(s).sortedDishes.slice(0,e(D)[e(s).id]||0))),be,(z,O)=>{var ne=Fe();const Q=Se(()=>(h(_),e(O),c(()=>_.getDishById(e(O).dishId))));var p=Oe(ne);{var ee=T=>{nt(T,{get dish(){return e(Q)},get partyDish(){return e(O)}})};E(p,T=>{e(Q)&&T(ee)})}$(z,ne)});var ue=u(F,2);{var Z=z=>{ye(z,{rootMargin:"1200px",$$events:{visible:()=>re(e(s).id)}})};E(ue,z=>{e(D),e(s),c(()=>(e(D)[e(s).id]||0)<e(s).sortedDishes.length)&&z(Z)})}r(Y),r(t),U(()=>{m(d,`${e(s),c(()=>e(s).name)??""} Party`),m(b,`${e(s),c(()=>e(s).bonus)??""}× bonus`),m(ie,`${e(s),c(()=>e(s).partyDishIds.length)??""} dishes`)}),$(i,t)});var le=u(X,2);{var ce=i=>{var s=ct(),t=a(s);ye(t,{rootMargin:"1200px",$$events:{visible:q}}),r(s),$(i,s)};E(le,i=>{e(y),e(C),c(()=>e(y)<e(C).length)&&i(ce)})}r(ae),r(A),r(V),Je(K,()=>e(x),i=>g(x,i)),$(oe,V),Ie()}export{It as component,kt as universal};
